# GitHub Copilot Instructions - EMMA HR Project

## üéØ Project Context
- **Project:** EMMA HR - Employee Management Monitoring & Administration
- **Tech Stack:** Astro, TypeScript, Tailwind CSS, SQLite, Node.js
- **Purpose:** Professional HR Tech platform for talent management
- **Target:** Enterprise-level HR departments and consultants

## üé® EMMA Brand Colors
**Official Color Palette** - Always use these exact hex values:

### Primary Colors
- **#035AA6** - Main brand blue (primary buttons, titles, main CTAs)
- **#07598C** - Medium blue (hover states, secondary elements)
- **#11B4D9** - Light blue (accents, highlights, gradients)
- **#038C7F** - Teal (success states, progress indicators, variety)
- **#0D0D0D** - Deep black (main text, headings)

### Usage Guidelines
```css
/* Hero sections with gradient */
bg-gradient-to-br from-[#035AA6] via-[#07598C] to-[#11B4D9]

/* Primary buttons */
bg-[#035AA6] hover:bg-[#07598C]

/* Text highlights */
text-[#035AA6] 

/* Borders and accents */
border-[#11B4D9]/20

/* Success/progress elements */
text-[#038C7F] bg-[#038C7F]

/* Main headings */
text-[#0D0D0D]
```

**IMPORTANT:** Never use generic blue colors (blue-500, sky-600, etc.). Always use EMMA brand colors with arbitrary values like `bg-[#035AA6]`.

## üèóÔ∏è Architecture Patterns

### Component Structure (Astro)
```astro
---
// 1. Interfaces/Types first
interface ComponentData {
  id: number;
  title: string;
  // ... other properties
}

// 2. Database operations
import { getDatabase } from '../lib/database.js';

// 3. Data fetching
let data: ComponentData[] = [];
try {
  const db = getDatabase();
  data = db.prepare('SELECT * FROM table_name WHERE is_active = 1').all();
} catch (error) {
  console.error('Error loading data:', error);
}
---

<!-- 4. Clean HTML with Tailwind classes only -->
<div class="bg-white rounded-lg shadow-sm p-6">
  <!-- Content here -->
</div>

<script>
// 5. JavaScript separated from HTML
// TypeScript comments for type safety
/**
 * @typedef {Object} ComponentData
 * @property {number} id
 * @property {string} title
 */

class ComponentManager {
  // Implementation here
}

// Initialize when DOM ready
document.addEventListener('DOMContentLoaded', () => {
  new ComponentManager();
});
</script>
```

### Admin Panel Pattern
```astro
---
// Always follow this structure for admin pages
---
<html lang="es">
<head>
  <meta charset="utf-8" />
  <link rel="icon" type="image/svg+xml" href="/favicon.svg" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Panel Admin - [Feature] | Emma</title>
  <link rel="stylesheet" href="/src/styles/admin.css" />
</head>
<body class="bg-gray-50">
  <!-- Navigation with back button -->
  <!-- Stats cards grid -->
  <!-- Main content table -->
  <!-- Modal for CRUD operations -->
  <script type="module" src="/src/pages/admin/[feature].js"></script>
</body>
</html>
```

### API Routes Pattern
```javascript
import { getDatabase } from '../../../lib/database.js';

export async function GET() {
  try {
    const db = getDatabase();
    const results = db.prepare('SELECT * FROM table_name ORDER BY created_at DESC').all();
    
    return new Response(JSON.stringify(results), {
      status: 200,
      headers: { 'Content-Type': 'application/json' }
    });
  } catch (error) {
    console.error('Error:', error);
    return new Response(JSON.stringify({ error: 'Error message' }), {
      status: 500,
      headers: { 'Content-Type': 'application/json' }
    });
  }
}

export async function POST({ request }) {
  try {
    const data = await request.json();
    // Validation
    if (!data.required_field) {
      return new Response(JSON.stringify({ error: 'Required field missing' }), {
        status: 400,
        headers: { 'Content-Type': 'application/json' }
      });
    }
    
    const db = getDatabase();
    const result = db.prepare('INSERT INTO table_name (field) VALUES (?)').run(data.field);
    
    return new Response(JSON.stringify({ 
      success: true, 
      id: result.lastInsertRowid 
    }), {
      status: 201,
      headers: { 'Content-Type': 'application/json' }
    });
  } catch (error) {
    console.error('Error:', error);
    return new Response(JSON.stringify({ error: 'Error creating record' }), {
      status: 500,
      headers: { 'Content-Type': 'application/json' }
    });
  }
}
```

## üé® Design System

### Color Palette
- **Primary:** Blue (blue-600, blue-500)
- **Success:** Green (green-600, green-500) 
- **Warning:** Orange (orange-600, orange-500)
- **Error:** Red (red-600, red-500)
- **Info:** Purple (purple-600, purple-500)
- **Neutral:** Gray (gray-50 to gray-900)

### Spacing & Layout
- **Container:** `container mx-auto px-4 py-6`
- **Cards:** `bg-white rounded-lg shadow-sm border border-gray-200 p-6`
- **Buttons:** `px-4 py-2 rounded-md font-medium transition-colors`
- **Grid:** `grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6`

### Typography
- **Headings:** `text-xl font-semibold text-gray-900`
- **Body:** `text-sm text-gray-600`
- **Labels:** `text-sm font-medium text-gray-700`

## üõ°Ô∏è Security & Validation

### Input Validation
```javascript
// Always validate required fields
if (!title || !type) {
  return new Response(JSON.stringify({ error: 'Title and type are required' }), {
    status: 400,
    headers: { 'Content-Type': 'application/json' }
  });
}

// Sanitize inputs before database operations
const sanitizedTitle = title.trim();
```

### Database Operations
```javascript
// Use prepared statements always
const stmt = db.prepare('SELECT * FROM table WHERE id = ?');
const result = stmt.get(id);

// For inserts, return the ID
const insertStmt = db.prepare('INSERT INTO table (field) VALUES (?)');
const result = insertStmt.run(value);
const newId = result.lastInsertRowid;
```

## üì± Responsive Design Rules

### Breakpoints
- **sm:** 640px and up
- **md:** 768px and up  
- **lg:** 1024px and up
- **xl:** 1280px and up

### Common Patterns
```html
<!-- Mobile-first grid -->
<div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4">

<!-- Responsive text -->
<h1 class="text-lg md:text-xl lg:text-2xl">

<!-- Hide on mobile -->
<div class="hidden md:block">

<!-- Show only on mobile -->
<div class="block md:hidden">
```

## üîÑ State Management

### Error Handling
```javascript
try {
  // Database operation
} catch (error) {
  console.error('Descriptive error message:', error);
  // User-friendly error response
}
```

### Loading States
```javascript
// Show loading indicator
const loadingElement = document.getElementById('loading');
loadingElement.classList.remove('hidden');

try {
  // Operation
} finally {
  // Hide loading indicator
  loadingElement.classList.add('hidden');
}
```

## üéØ Naming Conventions

### Files
- **Components:** `ComponentName.astro`
- **Pages:** `page-name.astro`
- **APIs:** `index.js` in feature folder
- **Scripts:** `feature-name.js`

### CSS Classes
- **BEM-like:** `component-element--modifier`
- **Utility-first:** Prefer Tailwind classes
- **Custom:** Only when Tailwind insufficient

### Database
- **Tables:** `snake_case` (e.g., `hero_slides`)
- **Columns:** `snake_case` (e.g., `is_active`)
- **Booleans:** Use INTEGER (0/1) not BOOLEAN

## üöÄ Performance Rules

### Images
- Use `loading="lazy"` for non-critical images
- Provide `alt` attributes always
- Optimize file sizes

### Database
- Use indexes for frequently queried columns
- Limit results with `LIMIT` when appropriate
- Use prepared statements for security and performance

### JavaScript
- Load scripts only when needed
- Use event delegation for dynamic content
- Minimize DOM queries

## üìã Common Snippets

### Modal Toggle
```javascript
function showModal() {
  document.getElementById('modal').classList.remove('hidden');
}

function hideModal() {
  document.getElementById('modal').classList.add('hidden');
}
```

### Form Handling
```javascript
async function handleSubmit(e) {
  e.preventDefault();
  const formData = new FormData(e.target);
  const data = Object.fromEntries(formData);
  
  try {
    const response = await fetch('/api/endpoint', {
      method: 'POST',
      headers: { 'Content-Type': 'application/json' },
      body: JSON.stringify(data)
    });
    
    if (response.ok) {
      showSuccess('Operation successful');
      hideModal();
      refreshData();
    } else {
      const error = await response.json();
      showError(error.error || 'Operation failed');
    }
  } catch (error) {
    console.error('Error:', error);
    showError('Network error');
  }
}
```

### Notification System
```javascript
function showNotification(message, type = 'info') {
  const notification = document.createElement('div');
  notification.className = `fixed top-4 right-4 z-50 p-4 rounded-md shadow-lg ${
    type === 'success' ? 'bg-green-500 text-white' : 
    type === 'error' ? 'bg-red-500 text-white' : 
    'bg-blue-500 text-white'
  }`;
  notification.textContent = message;
  document.body.appendChild(notification);
  
  setTimeout(() => notification.remove(), 5000);
}
```

## üìä Analytics & Monitoring

### Console Logging
```javascript
// Use descriptive prefixes
console.log('‚úÖ [ComponentName] Data loaded successfully');
console.error('‚ùå [ComponentName] Failed to load data:', error);
console.warn('‚ö†Ô∏è [ComponentName] Deprecated method used');
```

### Error Tracking
```javascript
// Track user actions for debugging
console.log('User action:', { action: 'button_click', element: 'save_button' });
```

---

## üéØ Key Reminders for Copilot

1. **Always use Tailwind classes** - no custom CSS unless absolutely necessary
2. **Separate concerns** - HTML, TypeScript types, and JavaScript logic
3. **Error handling** - wrap database operations in try-catch
4. **Responsive design** - mobile-first approach
5. **Type safety** - use TypeScript interfaces and JSDoc comments
6. **Performance** - lazy loading, prepared statements, minimal DOM queries
7. **Accessibility** - alt texts, ARIA labels, semantic HTML
8. **Security** - validate inputs, use prepared statements
9. **Consistency** - follow established patterns in the codebase
10. **Professional tone** - enterprise-grade quality in all implementations
